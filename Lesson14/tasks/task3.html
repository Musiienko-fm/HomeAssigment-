<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Задача 1</title>
	<link rel="stylesheet" href="../../css/style.css">
</head>

<body>

	<body>
		<div class="task">
			<div class="task__container">
				<h1 class="task__title  title">Задача 3</h1>
				<div class="body-list__text text">
					Ось приклад відповіді з одного з сайтів (масив об’єктів з інформацією про товари)
				</div>
				<ul class="body-list__text text">
					<li class="body-list__text text">
						1) Загальну вартість (нові ціни - price)
					</li>
					<li class="body-list__text text">
						2) Знайти кількість товарів, у яких ціна зменшилась (price < old_price). </li>
					<li class="body-list__text text">
						3) Товари, які доступні (sell_status:"available")
					</li>
					<li class="body-list__text text">
						4) сформувати новий список об”єктів тільки доступних для продажу товарів, які міститимуть тільки
						ідентифікатор товару (id), нову ціну (price), стару ціну (old_price), та ціну у доларах (usd_price)
					</li>
					<script src="task.js"></script>
					<script>
						//1. Загальну вартість (нові ціни - price)
						const totalPriceProduct = dataList.reduce(
							(prevSum, product) => prevSum + product.price,
							0
						)
						//2.Знайти кількість товарів, у яких ціна зменшилась (price < old_price)
						const quantityChangedPrice = dataList.reduce(
							(prevQuantity, product) => product.price < product.old_price ? prevQuantity + 1 : prevQuantity,
							0
						)
						//3.Товари, які доступні (sell_status:"available")
						function getObjProductAvailableStatus(objProduct) {
							let arrStatusAvailable = []
							for (const i in objProduct) {
								if (objProduct[i].sell_status === 'available') {
									arrStatusAvailable.push(objProduct[i])
								}
							}
							return arrStatusAvailable
						}
						const objProductAvailableStatus = getObjProductAvailableStatus(dataList)
						console.log(objProductAvailableStatus)
						//4.сформувати новий список об”єктів тільки доступних для продажу товарів, які міститимуть тільки ідентифікатор товару (id), нову ціну (price), стару ціну (old_price), та ціну у доларах (usd_price)
						function getObjListProduct(objProduct) {
							let getObjListProduct = []
							for (const product in objProduct) {
								getObjListProduct.push({
									id: product.id,
									price: product.price,
									old_price: product.old_price,
									usd_price: product.usd_price
								})
							}
							return getObjListProduct
						}
						const objListProduct = getObjListProduct(dataList)
						console.log(objListProduct)
						//3. Виводимо результат
						document.write(`
						<div class="text--mb">
							<p class="text">Загальна вартість ${totalPriceProduct}</p>
							<p class="text">Кількість товарів, у яких зменшилась ціна ${quantityChangedPrice}</p>
						</div>
						`)
					</script>
			</div>
		</div>
	</body>
</body>

</html>